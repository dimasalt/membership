jQuery(document).ready(function(ah){function y(aB,aE,aD,aF){for(var aC=0;aC<aB.length;++aC){var ay=ah(aB[aC]),aA=ay.attr("accessally-dependency-value"),az=ay.attr("accessally-dependency-value-not"),aG;if(typeof aA!==typeof undefined&&aA!==false){aG=aA.split(",");if(ah.inArray(aE,aG)>=0){aD(ay)}else{aF(ay)}}if(typeof az!==typeof undefined&&az!==false){aG=az.split("|");if(ah.inArray(aE,aG)<0){aD(ay)}else{aF(ay)}}}}ah(document).on("change","[accessally-dependency-source]",function(){var ay=ah(this),aB="no",aA=ay.attr("accessally-dependency-source"),az=ah('[accessally-dependency="'+aA+'"]');if(ay.attr("type")==="checkbox"){if(ay.is(":checked")){aB="yes"}}else{aB=ay.val()}if(aB){aB=aB.replace(/\"/g,'\\"')}y(az.filter("[hide-toggle]"),aB,function(aC){aC.show()},function(aC){aC.hide()})});function u(ay){var az=ay.attr("style");if(typeof az===typeof undefined||az===false){az=""}else{if(az.length>0&&!az.endsWith(";")){az+=";"}}az+="background-color:#ff0000 !important;";ay.attr("style",az)}function p(ay){var az=ay.attr("style");if(typeof az===typeof undefined||az===false){az=""}else{az=az.replace("background-color:#ff0000 !important;","")}ay.attr("style",az)}function aj(ay){var az=[];ay.each(function(aB,aC){var aA=ah(aC);if(aA.val()){return}az.push(aA);u(aA)});if(az.length>0){setTimeout(function(){for(var aA=0;aA<az.length;++aA){p(az[aA])}},200);return false}return true}ah(document).on("submit",".accessally-form-field-check",function(){var ay=ah(this).find(".accessally-form-field-required");return aj(ay.filter(":visible"))});function ai(){if(typeof YT==="undefined"||typeof YT.Player==="undefined"){var ay=document.createElement("script");ay.src="https://www.youtube.com/iframe_api";var az=document.getElementsByTagName("script")[0];az.parentNode.insertBefore(ay,az)}}function ap(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)}function G(ay){if(ap()){if(ay in an&&"started" in an[ay]){return an[ay]["started"]}return false}return true}function o(ay){if("accessally_video_ordinal" in ay.target){if(!G(ay.target.accessally_video_ordinal)){return}}ay.target.playVideo()}function f(ay){if(ay.data!=-1){an[ay.target.accessally_video_ordinal]["started"]=true}}function j(az){var ay={};if(az){var aC=az.split("&"),aA,aB;for(aA=0;aA<aC.length;++aA){aB=aC[aA].split("=");if(aB.length>1){ay[aB[0]]=aB[1]}}}return ay}var s=0,an={};function O(az){var ay=az.attr("accessally-video-ordinal"),aA;if(an[ay]["started"]){aA=an[ay]["player"];if(aA.getPlayerState()==-1){aA.stopVideo();aA.playVideo()}}}function v(aA,aC,aB){var az=aA.attr("width"),aG=aA.attr("height"),aH=aA.attr("arg"),ay=j(aH),aE="accessally-webinar-div-"+aC+"-"+s,aD={videoId:aC,playerVars:ay,events:{onStateChange:f}},aF;aA.html('<div id="'+aE+'"></div>');if(az){aD.width=az}if(aG){aD.height=aG}if(aB){aD.events["onReady"]=o}aF=new YT.Player(aE,aD);aF.accessally_video_ordinal=s;an[s]={started:false,player:aF};aA.attr("accessally-video-ordinal",s);++s}function aa(ay,aB,aA){var az=ay.attr("state");if(az!=="show"){v(ay,aB,aA);ay.attr("state","show")}else{O(ay)}}function e(aA,aB){var aE=aA.attr("state");if(aE==="wait"){var aC=aA.attr("width"),az=aA.attr("height"),aF=aA.attr("frameborder"),ay=aA.attr("arg"),aD="";if(aC){aD+=' width="'+aC+'"'}if(az){aD+=' height="'+az+'"'}aA.html("<iframe"+aD+' src="'+aB+"&amp;"+ay+'" frameborder="'+aF+'" allowfullscreen></iframe>');aA.attr("state","legacy")}}function m(ay){var aC=ay.attr("state");if(aC!=="wait"){var aB=ay.attr("wait-text"),aA=ay.attr("start-time"),az=ah('<div class="accessally-webinar-countdown" accessally-countdown-start="'+aA+'"></div>');az.attr("accessally-countdown-format",aB);ay.html(az);ay.attr("state","wait")}}function t(aA,az){try{var ay=JSON.parse(az);if("url" in ay){if("yid" in ay&&T()){ah(".accessally-webinar-pending[post-id="+aA+"]").each(function(aC,aD){aa(ah(aD),ay.yid,true)})}else{ah(".accessally-webinar-pending[post-id="+aA+"]").each(function(aC,aD){e(ah(aD),ay.url)})}}else{ah(".accessally-webinar-pending[post-id="+aA+"]").each(function(aC,aD){m(ah(aD))})}}catch(aB){}setTimeout(L,5000,aA)}function L(ay){var az={action:"accessally_pending_webinar",submit_nonce:accessally_script_object.webinar_nonce,pid:ay};ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:az,success:function(aA){t(ay,aA)}})}function n(){var az={};ah(".accessally-webinar-pending[post-id]").each(function(aC,aD){var aB=ah(aD),aA=aB.attr("post-id");az[aA]=0});for(var ay in az){setTimeout(L,5000,ay)}}function T(){return typeof YT!=="undefined"&&typeof YT.Player!=="undefined"}function av(){if(T()){ah("[accessally-webinar-init]").each(function(az,aA){var ay=ah(aA),aB=ay.attr("accessally-webinar-init");aa(ay,aB,false)})}else{setTimeout(av,1000)}}function ad(aD,aC,aA){var az=aD[1].indexOf("{{"+aC+"}}"),ay=aD[1].indexOf("{{"+aC+aC+"}}");if(az>-1||ay>-1){var aB=Math.floor(aD[0]/aA);if(aA<=1){aD[0]=0}else{aD[0]=aD[0]%aA}if(ay>-1){if(aB<10){aB="0"+aB}aD[1]=aD[1].replace("{{"+aC+aC+"}}",aB)}else{aD[1]=aD[1].replace("{{"+aC+"}}",aB)}}return aD}function l(ay,aC){var aD=ay.attr("accessally-countdown-start"),aB=ay.attr("accessally-countdown-format"),az=aD-aC,aA=null;if(az<0){az=0}aA=[az,aB];aA=ad(aA,"d",86400);aA=ad(aA,"h",3600);aA=ad(aA,"m",60);aA=ad(aA,"s",1);ay.html(aA[1]);if(az<=0){return false}return true}function W(){var aA=(new Date()).getTime()/1000,az=ah("[accessally-countdown-format][accessally-countdown-start]");for(var ay=0;ay<az.length;++ay){l(ah(az[ay]),aA)}}setInterval(W,1000);W();ah(document).on("click touchend","[accessally-tab-header][accessally-tab-iden]",function(){var aF=ah(this),aE=aF.attr("accessally-tab-header"),ay=aF.attr("accessally-tab-iden"),aA=aF.attr("accessally-filmstrip-count"),az=ah('[accessally-tab-content="'+aE+'"][accessally-tab-iden="'+ay+'"]');ah('[accessally-tab-header="'+aE+'"]').removeClass("accessally-active-tab-header");aF.addClass("accessally-active-tab-header");ah('[accessally-tab-content="'+aE+'"]').hide();D(az);az.show();if(typeof aA!==typeof undefined&&aA!==false){var aD=aF.parent("[accessally-filmstrip-data]"),aB=aD.attr("accessally-filmstrip-data"),aC=aB.split(",");aC[2]=aA;aD.attr("accessally-filmstrip-data",aC.join(","))}});ah(document).on("click touchend",".accessally-filmstrip-left",function(){var aE=ah(this),aD=aE.parent("[accessally-filmstrip-data]");if(aD.length===1){var az=aD.attr("accessally-filmstrip-data"),aC=az.split(","),aF=parseInt(aC[0]),aB=parseInt(aC[1]),aA=parseInt(aC[2]),ay=parseInt(aC[3]);if(aB>0){--aB;aC[1]=aB;aD.find('[accessally-filmstrip-count="'+aB+'"]').show();aD.find('[accessally-filmstrip-count="'+(aB+aF)+'"]').hide();if(aA>=aB+aF){aA=aB+aF-1;aD.find('[accessally-filmstrip-count="'+aA+'"]').click();aC[2]=aA}aD.attr("accessally-filmstrip-data",aC.join(","))}if(aB<=0){aE.addClass("accessally-direction-disabled")}if(aB<ay-aF){aE.siblings(".accessally-filmstrip-right").removeClass("accessally-direction-disabled")}}});ah(document).on("click touchend",".accessally-filmstrip-right",function(){var aE=ah(this),aD=aE.parent("[accessally-filmstrip-data]");if(aD.length===1){var az=aD.attr("accessally-filmstrip-data"),aC=az.split(","),aF=parseInt(aC[0]),aB=parseInt(aC[1]),aA=parseInt(aC[2]),ay=parseInt(aC[3]);if(aB<ay-aF){aD.find('[accessally-filmstrip-count="'+(aB)+'"]').hide();aD.find('[accessally-filmstrip-count="'+(aB+aF)+'"]').show();++aB;aC[1]=aB;if(aA<aB){aA=aB;aD.find('[accessally-filmstrip-count="'+aA+'"]').click();aC[2]=aA}aD.attr("accessally-filmstrip-data",aC.join(","))}if(aB>0){aE.siblings(".accessally-filmstrip-left").removeClass("accessally-direction-disabled")}if(aB>=ay-aF){aE.addClass("accessally-direction-disabled")}}});function A(){ah("[accessally-tab-content]:not(:visible)").find("iframe").each(function(az,aA){var ay=ah(aA),aB=ay.attr("src");ay.removeAttr("src").attr("accessally-delay-src",aB)})}function D(ay){ay.find("iframe[accessally-delay-src]").each(function(aA,aB){var az=ah(aB),aC=az.attr("accessally-delay-src");az.removeAttr("accessally-delay-src").attr("src",aC)})}ah(document).on("submit","form.accessally-view-purchase-charge-now-section",function(){var az=ah(this),ay=az.attr("accessally-submitted");if(ay){return false}az.attr("accessally-submitted","yes");az.find('input[type="submit"]').hide();return true});ah(document).on("submit","form.accessally-add-tag-form",function(aC){var aB=ah(this),aA=aB.attr("accessally-submitted"),az=aB.attr("accessally-confirmation");if(aA){aC.preventDefault();return false}if(az){var ay=confirm(az);if(ay!==true){aC.preventDefault();return false}}aB.attr("accessally-submitted","yes");return true});ah(document).on("click touchend","form.accessally-add-tag-form div.accessally-add-tag-button, form.accessally-add-tag-form div.accessally-add-tag-button *",function(){var ay=ah(this).closest("form.accessally-add-tag-form");ay.trigger("submit");return false});function F(aB,az){try{var ay=JSON.parse(az);if("status" in ay){if(ay.status==0){aB.after(ay.message)}else{if("message" in ay&&ay.message){if("redirect" in ay&&ay.redirect>0){window.location.href=ay.message}else{aB.after(ay.message)}}if("fid" in ay&&ay.fid){ah('[accessally-field-update="'+ay.fid+'"]').val(ay.fv).text(ay.fv)}}}}catch(aA){}}ah(document).on("submit","form.accessally-field-operation-form",function(aD){var aC=ah(this),aB=aC.attr("accessally-submitted"),az=aC.attr("accessally-confirmation"),aF=aC.attr("accessally-operation-id"),aE=ah('.accessally-field-operation-form[accessally-operation-id="'+aF+'"]'),aA;if(aB){aD.preventDefault();return false}if(az){var ay=confirm(az);if(ay!==true){aD.preventDefault();return false}}aC.attr("accessally-submitted","yes");aE.hide();ah('.accessally-field-operation-wait[accessally-operation-id="'+aF+'"]').show();aA={action:"accessally_custom_field_operation",info:encodeURI(aC.serialize())};ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:aA,success:function(aG){F(aE,aG);ah('.accessally-field-operation-wait[accessally-operation-id="'+aF+'"]').hide()}});return false});ah(document).on("click touchend","form.accessally-field-operation-form div.accessally-field-operation-button, form.accessally-field-operation-form div.accessally-field-operation-button *",function(){var ay=ah(this).closest("form.accessally-field-operation-form");ay.trigger("submit");return false});function am(){ah("[accessally-local-time]").each(function(aB,aD){var az=ah(aD),aE=az.attr("accessally-local-time"),aA=new Date(parseInt(aE)*1000),aC=aA.toString(),aF=aC.indexOf("GMT"),ay=-1;if(aF>=0){ay=aC.indexOf(" ",aF);if(ay>0){aC=aC.replace(aC.substring(aF,ay),"")}}az.text(aC)});n();A();if(ah(".accessally-webinar-pending").length>0||ah("[accessally-webinar-init]").length>0){ai();setTimeout(av,500)}}am();document.addEventListener("ambitionallyrefresh",function(ay){am()},false);function P(){var aA=ah(this),ay=ah(aA.attr("accessally-update-container")),az=new FormData();az.append("action","accessally_upload_profile_image");if(this.files.length>0){az.append("file",this.files[0],this.files[0].name)}else{return}ay.addClass("accessally-upload-in-progress");ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:az,cache:false,dataType:"json",processData:false,contentType:false,success:function(aB){C(aB,ay);aA.val("")}})}function C(az,ay){try{if("error" in az){alert("Cannot upload file due to error:\n["+az.error+"]\nPlease refresh the page and try again.")}else{ay.find(".accessally-profile-image-update-target").css("background-image","url("+az.url+")")}}catch(aA){alert("Cannot upload file due to error:\n["+aA+"]\nPlease refresh the page and try again.")}finally{ay.removeClass("accessally-upload-in-progress")}}ah(document).on("change",".accessally-profile-image-upload",P);var at={};ah(document).on("click touchend","[accessally-inline-profile-update]",function(aB){var aA=ah(this),ay=aA.attr("accessally-inline-profile-update");ah('[accessally-inline-profile-update="'+ay+'"]').hide();ah('[accessally-inline-profile-display="'+ay+'"]').hide();var aC=ah('[accessally-inline-profile-value="'+ay+'"]'),az=aC.val();at[ay]=az;aC.show().focus().select()});var Q=false;ah(document).on("keypress","[accessally-inline-profile-value]",function(az){if(az.keyCode==13){az.preventDefault();var ay=ah(this);I(ay);Q=true;ay.blur();return false}});ah(document).on("keydown","[accessally-inline-profile-value]",function(az){if(az.keyCode==27){az.preventDefault();var ay=ah(this);d(ay);Q=true;ay.blur();return false}});function d(az){var ay=az.attr("accessally-inline-profile-value");ah('[accessally-inline-profile-update="'+ay+'"]').show();ah('[accessally-inline-profile-display="'+ay+'"]').show();ah('[accessally-inline-profile-value="'+ay+'"]').hide();ah('[accessally-inline-profile-wait="'+ay+'"]').hide()}ah(document).on("focusout","[accessally-inline-profile-value]",function(ay){if(Q){Q=false;return false}I(ah(this))});function I(aA){var ay=aA.attr("accessally-inline-profile-value"),aB=aA.val();if(ay in at&&at[ay]===aB){d(aA);return}ah('[accessally-inline-profile-wait="'+ay+'"]').show();var az={action:"accessally_inline_profile_update",attr:ay,val:aB,submit_nonce:accessally_script_object.webinar_nonce};ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:az,success:function(aC){try{Z(aC,ay)}catch(aD){alert(aD)}finally{ah('[accessally-inline-profile-update="'+ay+'"]').show();ah('[accessally-inline-profile-display="'+ay+'"]').show();ah('[accessally-inline-profile-value="'+ay+'"]').hide();ah('[accessally-inline-profile-wait="'+ay+'"]').hide()}}});return false}function Z(aA,az){var ay=JSON.parse(aA);if("status" in ay){if(ay.status==="error"){throw ay.message}ah('[accessally-inline-profile-value="'+az+'"]').val(ay.value);ah('[accessally-inline-profile-display="'+az+'"]').html(ay.value)}else{throw"Invalid response. Please refresh the page and try again."}}ah(document).on("click touchend","[accessally-user-directory-update-button]",function(az){var ay=ah(this).attr("accessally-user-directory-update-button");X(ay)});ah(document).on("keypress","[accessally-user-directory-update]",function(aA){if(aA.keyCode==13){aA.preventDefault();var az=ah(this),ay=ah(this).attr("accessally-user-directory-update");az.blur();X(ay);return false}});ah(document).on("click touchend","[accessally-user-directory-page-first]",function(aB){var ay=ah(this).attr("accessally-user-directory-page-first"),aA=ah("#accessally-user-directory-page-input-"+ay),az=parseInt(aA.val());if(az>1){aA.val(1);X(ay)}});ah(document).on("click touchend","[accessally-user-directory-page-previous]",function(aB){var ay=ah(this).attr("accessally-user-directory-page-previous"),aA=ah("#accessally-user-directory-page-input-"+ay),az=parseInt(aA.val());if(az>1){aA.val(Math.max(1,az-1));X(ay)}});ah(document).on("click touchend","[accessally-user-directory-page-next]",function(aC){var az=ah(this).attr("accessally-user-directory-page-next"),aB=ah("#accessally-user-directory-page-input-"+az),ay=parseInt(ah("#accessally-user-directory-page-max-"+az).text()),aA=parseInt(aB.val());if(aA<ay){aB.val(Math.min(ay,aA+1));X(az)}});ah(document).on("click touchend","[accessally-user-directory-page-last]",function(aC){var az=ah(this).attr("accessally-user-directory-page-last"),aB=ah("#accessally-user-directory-page-input-"+az),ay=parseInt(ah("#accessally-user-directory-page-max-"+az).text()),aA=parseInt(aB.val());if(aA<ay){aB.val(ay);X(az)}});function X(ay){var az=ah("#accessally-user-directory-search-input-"+ay).val(),aE=ah("#accessally-user-directory-page-input-"+ay).val(),aB=ah("#accessally-user-directory-filter-select-"+ay).val(),aA=ah("#accessally-user-directory-update-nonce-"+ay).val(),aF=ah("#accessally-user-directory-update-dir-"+ay).val(),aD=ah("#accessally-user-directory-wait-"+ay);aD.show();var aC={action:"accessally_refresh_user_directory",search:az,filter:aB,page:aE,nonce:aA,dir:aF};ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:aC,success:function(aG){try{J(aG,ay)}catch(aH){alert(aH)}finally{aD.hide()}}});return false}function J(aA,az){var aB=ah("#accessally-user-directory-container-"+az),ay;aB.empty();ay=JSON.parse(aA);if("status" in ay){if(ay.status==="error"){throw ay.message}aB.html(ay.code);ah("#accessally-user-directory-page-input-"+az).val(ay.page);ah("#accessally-user-directory-page-max-"+az).text(ay["max-page"])}else{throw"Invalid response. Please refresh the page and try again."}}function ax(az){var ay=[];az.find('input[type="hidden"],input[type="text"],textarea').each(function(aC,aD){var aB=ah(aD),aA=aB.attr("accessally-field");if(typeof aA!==typeof undefined&&aA!==false){ay.push(encodeURIComponent(aA)+"="+encodeURIComponent(aB.val()))}});az.find('input[type="radio"]:checked').each(function(aC,aD){var aB=ah(aD),aA=aB.attr("name");if(typeof aA!==typeof undefined&&aA!==false){ay.push(encodeURIComponent(aA)+"="+encodeURIComponent(aB.attr("value")))}});az.find('input[type="checkbox"]:checked').each(function(aC,aD){var aB=ah(aD),aA=aB.attr("accessally-field");if(typeof aA!==typeof undefined&&aA!==false){ay.push(encodeURIComponent(aA)+"="+encodeURIComponent(aB.attr("value")))}});az.find("select").each(function(aC,aD){var aB=ah(aD),aA=aB.attr("accessally-field");if(typeof aA!==typeof undefined&&aA!==false){ay.push(encodeURIComponent(aA)+"="+encodeURIComponent(aB.children(":selected").val()))}});return ay.join("&")}var ac={};function Y(ay,az){if(!(ay in ac)){ac[ay]={}}ac[ay]["status"]=az}function V(ay){if(ay in ac&&"status" in ac[ay]){return ac[ay]["status"]}return -1}function R(ay,aA){if(!(ay in ac)){ac[ay]={}}ac[ay]["order"]=aA;for(var az in aA){ah("#accessally-order-form-"+az+"-"+ay).val(aA[az])}}function ae(ay,aA){if(ay in ac&&"order" in ac[ay]&&aA in ac[ay]["order"]){return ac[ay]["order"][aA]}var az=ah("#accessally-order-form-"+aA+"-"+ay),aB;if(az.length>0){aB=az.val();if(aB.length>0){return aB}}return false}ah(document).on("keypress","[accessally-order-form-step-1-input]",function(aA){var az=aA.keyCode||aA.which;if(az==13){var ay=ah(this).attr("accessally-order-form-step-1-input");B(ay);aA.preventDefault();return false}});ah(document).on("touchend click","[accessally-order-form-step-1-submit]",function(az){var ay=ah(this).attr("accessally-order-form-step-1-submit");B(ay)});function b(az){var aA=ah("#accessally-order-form-first-name-"+az),aB=aA.val(),ay=true;if(aB.length<=0){aA.addClass("accessally-order-form-error-input");ay=false}aA=ah("#accessally-order-form-last-name-"+az),aB=aA.val();if(aB.length<=0){aA.addClass("accessally-order-form-error-input");ay=false}aA=ah("#accessally-order-form-email-"+az),aB=aA.val();if(!aB.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i)){aA.addClass("accessally-order-form-error-input");ay=false}return ay}function B(aG){var aF=ah("#accessally-order-form-nonce-"+aG).val(),aI=ah("#accessally-order-form-oid-"+aG).val(),aC=ah("#accessally-order-form-step-1-"+aG),aA=af();if(aC.length===1){if(!b(aG)){return false}var az=ax(aC);Y(aG,0);M(aG,0);ah("#accessally-order-form-wait-overlay-paypal-"+aG+" .accessally-order-form-wait-message").hide();ah("#accessally-order-form-wait-message-paypal-start-"+aG).show();ah("#accessally-order-form-wait-overlay-paypal-"+aG).show();var aD={action:"accessally_start_order",nonce:aF,oid:aI,info:az,aff:aA,url:window.location.href};ah("#accessally-order-form-error-"+aG).hide();ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:aD,success:function(aJ){ab(aJ,aG);if("yes"===accessally_script_object.pay.crm_opt){i(aG,aC.find('[accessally-field="first-name"]').val(),aC.find('[accessally-field="email"]').val())}},error:function(aL,aJ,aK){M(aG,-1);ah("#accessally-order-form-error-"+aG).text("Server error. Please contact site admin/owner.").show()}})}var ay=ah("#accessally-order-form-first-name-"+aG).val(),aH=ah("#accessally-order-form-last-name-"+aG).val();ah("#accessally-order-form-billing-first-name-"+aG).val(ay);ah("#accessally-order-form-billing-last-name-"+aG).val(aH);ah("#accessally-order-form-cc-name-"+aG).val(ay+" "+aH);ah("#accessally-order-form-step-1-"+aG).hide();var aE=ah("#accessally-order-form-step-2-"+aG),aB;aE.show();aB=aE.offset();document.body.scrollTop=aB.top-30;return false}function ab(aA,az){try{M(az,-1);var ay=JSON.parse(aA);if("status" in ay){if(ay.status==1){if("order" in ay){Y(az,1);R(az,ay.order)}if("paypal" in ay){M(az,1);au(az,ay.paypal);ah("#accessally-order-form-wait-overlay-paypal-"+az).hide();ah("#accessally-order-form-wait-message-paypal-start-"+az).hide()}}else{if(ay.status<0){throw ay.message}}}}catch(aB){M(az,-1);ah("#accessally-order-form-error-"+az).text(aB).show()}}function M(ay,az){if(!(ay in ac)){ac[ay]={}}ac[ay]["paypal_status"]=az}function z(ay){if(ay in ac&&"paypal_status" in ac[ay]){return ac[ay]["paypal_status"]}return -1}function au(ay,aA){if(!(ay in ac)){ac[ay]={}}ac[ay]["paypal"]=aA;for(var az in aA){ah("#accessally-order-form-pp-"+az+"-"+ay).val(aA[az])}}function ag(ay,aA){if(ay in ac&&"paypal" in ac[ay]&&aA in ac[ay]["paypal"]){return ac[ay]["paypal"][aA]}var az=ah("#accessally-order-form-pp-"+aA+"-"+ay),aB;if(az.length>0){aB=az.val();if(aB.length>0){return aB}}return false}function w(ay,az){if("start"===az){ah("#accessally-order-form-paypal-express-start-block-"+ay).show()}else{ah("#accessally-order-form-paypal-express-start-block-"+ay).hide()}if("wait"===az){ah("#accessally-order-form-paypal-express-wait-block-"+ay).show()}else{ah("#accessally-order-form-paypal-express-wait-block-"+ay).hide()}if("confirm"===az){ah("#accessally-order-form-paypal-express-confirm-block-"+ay).show()}else{ah("#accessally-order-form-paypal-express-confirm-block-"+ay).hide()}if("retry"===az){ah("#accessally-order-form-paypal-express-retry-block-"+ay).show()}else{ah("#accessally-order-form-paypal-express-retry-block-"+ay).hide()}}function ar(ay){if(ay in ao&&false!==ao[ay]){clearInterval(ao[ay]);ao[ay]=false}if(ay in al&&false!==al[ay]){clearInterval(al[ay]);al[ay]=false}}var ao=new Object,al=new Object;function k(ay,aA){ar(ay);var az=window.open(aA,"pp","toolbar=no, menubar=no, resizable=yes");if(az){ao[ay]=setInterval(function(){if(az.closed){ar(ay);ak(az,ay)}},100)}w(ay,"wait");al[ay]=setInterval(function(){K(ay)},5000)}function K(ay){var az=z(ay);if(az>=3){ar(ay);return}var aD=ae(ay,"oid"),aC=ag(ay,"nonce"),aA=ag(ay,"id"),aB={action:"accessally_get_paypal_express_info",nonce:aC,oid:aD,uid:aA,f:"no"};ah("#accessally-order-form-error-"+ay).hide();ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:aB,success:function(aE){H(aE,ay,false)}})}function x(az){var aA=z(az);if(1<=aA){M(az,2);var ay=ag(az,"redirect");k(az,ay)}else{ah("#accessally-order-form-error-"+az).text("Unable to initialize PayPal order. Please contact site owner / administrator").show()}}ah(document).on("touchend click","[accessally-paypal-express-start]",function(az){var ay=ah(this).attr("accessally-paypal-express-start");x(ay)});ah(document).on("touchend click","[accessally-paypal-express-reopen]",function(az){var ay=ah(this).attr("accessally-paypal-express-reopen");x(ay)});function ak(aE,ay){var az=aE.accessally_paypal_status,aD=ah("#accessally-order-form-oid-"+ay).val(),aC=ag(ay,"nonce"),aA=ag(ay,"id");if(az!=="cancel"){ah("#accessally-order-form-wait-overlay-paypal-"+ay+" .accessally-order-form-wait-message").hide();ah("#accessally-order-form-wait-message-paypal-info-"+ay).show();ah("#accessally-order-form-wait-overlay-paypal-"+ay).show();var aB={action:"accessally_get_paypal_express_info",nonce:aC,oid:aD,uid:aA,f:"yes"};ah("#accessally-order-form-error-"+ay).hide();ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:aB,success:function(aF){H(aF,ay,true)},error:function(aH,aF,aG){ah("#accessally-order-form-error-"+ay).text("Server error. Please contact site admin/owner.").show()},complete:function(){ah("#accessally-order-form-wait-message-paypal-info-"+ay).hide();ah("#accessally-order-form-wait-overlay-paypal-"+ay).hide()}})}}function H(aA,az,aB){try{var ay=JSON.parse(aA);if("status" in ay){if(ay.status==0){return}else{if(ay.status==1){M(az,3);w(az,"confirm");ar(az)}else{throw ay.message}}}else{throw"Unknown error"}}catch(aC){if(aB){ah("#accessally-order-form-error-"+az).text(aC).show()}}}ah(document).on("touchend click","[accessally-paypal-express-confirm]",function(aC){var aF=ah(this),aD=aF.attr("accessally-paypal-express-confirm"),aH=ae(aD,"oid"),aB=ah("#accessally-order-form-first-name-"+aD).val(),aI=ah("#accessally-order-form-last-name-"+aD).val(),aE=ah("#accessally-order-form-email-"+aD).val(),aG=ag(aD,"nonce"),ay=ag(aD,"id"),az=af();ah("#accessally-order-form-wait-overlay-paypal-"+aD+" .accessally-order-form-wait-message").hide();ah("#accessally-order-form-wait-message-paypal-confirm-"+aD).show();ah("#accessally-order-form-wait-overlay-paypal-"+aD).show();var aA={action:"accessally_confirm_paypal_express",nonce:aG,uid:ay,oid:aH,fname:aB,lname:aI,email:aE,aff:az};ah("#accessally-order-form-error-"+aD).hide();ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:aA,success:function(aJ){g(aJ,aD)},error:function(aL,aJ,aK){ah("#accessally-order-form-error-"+aD).text("Server error. Please contact site admin/owner.").show()},complete:function(){ah("#accessally-order-form-wait-message-paypal-confirm-"+aD).hide();ah("#accessally-order-form-wait-overlay-paypal-"+aD).hide()}});return false});function g(aA,az){try{var ay=JSON.parse(aA);if("status" in ay){if(ay.status==1){M(az,4);Y(az,3);var aD=ay.result;if("redirect"===aD.action){window.location=aD.url;return}else{if("display"===aD.action){ah("#accessally-order-form-success-message-"+az).html(aD.code);var aB=new Event("ambitionallyrefresh");document.dispatchEvent(aB);ah("#accessally-order-form-step-2-"+az).hide();ah("#accessally-order-form-step-3-"+az).show();return}else{throw aD.message}}}else{if(ay.status==-2){M(az,1);w(az,"retry");return}else{throw ay.message}}}else{throw"Unknown error"}}catch(aC){ah("#accessally-order-form-error-"+az).text(aC).show()}}function c(){if(typeof Stripe!=="undefined"){Stripe.setPublishableKey(accessally_script_object.pay.stripe_key)}else{setTimeout(c,1000)}}function q(){if(typeof Stripe==="undefined"){var ay=document.createElement("script");ay.src="https://js.stripe.com/v2/";var az=document.getElementsByTagName("script")[0];az.parentNode.insertBefore(ay,az)}}if(ah("[accessally-stripe-order-form]").length>0){q();c()}var E={name:["name",true],number:["number",true],exp_year:["year",true],exp_month:["month",true],cvc:["cvv",true]},S={address_line1:["address1",true],address_line2:["address2",false],address_city:["city",true],address_zip:["zip",true],address_country:["country",true]};function aq(aE,az,aB,ay){var aD=false,aA,aF;for(var aC in az){aA=ah("#"+aB+az[aC][0]+"-"+ay);aF=aA.val();if(aF.length<=0){if(az[aC][1]){aA.addClass("accessally-order-form-error-input");aD="Missing required information."}}else{aE[aC]=aF}}return{data:aE,error:aD}}ah(document).on("touchend click","[accessally-cc-pay]",function(aE){var aD=ah(this),ay=aD.attr("accessally-cc-pay"),aC={},aA,az=true,aB;if(V(ay)>=2){alert("Payment already in progress.");return}ah("#accessally-order-form-error-billing-"+ay).hide();ah("#accessally-order-form-error-cc-"+ay).hide();aA=aq(aC,E,"accessally-order-form-cc-",ay);if(aA.error){az=false;ah("#accessally-order-form-error-cc-"+ay).text(aA.error).show()}aC=aA.data;if(az){if(!Stripe.card.validateCardNumber(aC.number)){az=false;ah("#accessally-order-form-cc-number-"+ay).addClass("accessally-order-form-error-input");ah("#accessally-order-form-error-cc-"+ay).text("Invalid credit card number.").show()}}aA=aq(aC,S,"accessally-order-form-billing-",ay);if(aA.error){az=false;ah("#accessally-order-form-error-billing-"+ay).text(aA.error).show()}aC=aA.data;aB=aw(ay,true);aC.address_state=aB;if(aB.length<=0){az=false;ah("#accessally-order-form-error-billing-"+ay).text("Missing required information.").show()}if(az){Y(ay,2);ah("#accessally-order-form-wait-overlay-cc-"+ay).show();Stripe.card.createToken(aC,function(aF,aG){U(ay,aF,aG)})}});function U(aI,aD,aC){if(aC.error){ah("#accessally-order-form-error-cc-"+aI).text(aC.error.message).show();ah("#accessally-order-form-wait-overlay-cc-"+aI).hide();Y(aI,-1)}else{var aB=aC.id,aK=ae(aI,"oid"),aH=ae(aI,"uid"),aG=ah("#accessally-order-form-nonce-"+aI).val(),aF=ah("#accessally-order-form-step-1-"+aI),az=ah("#accessally-order-form-step-2-cc-"+aI),aA=af();if(aF.length===1&&az.length===1){var aJ=ax(aF),ay=ax(az),aE;ay+="&state="+encodeURIComponent(aw(aI,false));aE={action:"accessally_process_cc",nonce:aG,token:aB,oid:aK,uid:aH,info1:aJ,info2:ay,aff:aA};ah.ajax({type:"POST",url:accessally_script_object.ajax_url,data:aE,success:function(aL){N(aL,aI)},error:function(aN,aL,aM){ah("#accessally-order-form-error-cc-"+aI).text("Server error. Please contact site admin/owner.").show();Y(aI,-1)},complete:function(aL,aM){ah("#accessally-order-form-wait-overlay-cc-"+aI).hide()}})}}}function N(aA,az){try{var ay=JSON.parse(aA);if("status" in ay){if(ay.status==1){Y(az,3);var aD=ay.result;if("redirect"===aD.action){window.location=aD.url;return}else{if("display"===aD.action){ah("#accessally-order-form-success-message-"+az).html(aD.code);var aB=new Event("ambitionallyrefresh");document.dispatchEvent(aB);ah("#accessally-order-form-step-2-"+az).hide();ah("#accessally-order-form-step-3-"+az).show();return}else{throw aD.message}}}else{if(ay.status==-2){return}else{throw ay.message}}}else{throw"Unknown error"}}catch(aC){Y(az,-1);ah("#accessally-order-form-error-cc-"+az).text(aC).show()}}ah(document).on("change propertychange keypress input paste",".accessally-order-form-error-input",function(aA){var az=ah(this);if(az.val().length>0){az.removeClass("accessally-order-form-error-input");var ay=az.attr("accessally-input-check");if(typeof ay!==typeof undefined&&ay!==false){if(ah('.accessally-order-form-error-input[accessally-input-check="'+ay+'"]').length<=0){ah("#accessally-order-form-error-"+ay).hide()}}}});ah(document).on("change propertychange keyup input paste",".accessally-order-form-cc-card-number-input input, .accessally-order-form-cc-cvv-input input",function(aC){var aB=ah(this),aD=aB.val(),ay=aD.length,az,aA="";if(ay>0){for(az=0;az<ay;++az){if("0"<=aD[az]&&aD[az]<="9"){aA+=aD[az]}}if(aA!==aD){aB.val(aA)}}});ah(document).on("touchend click","[accessally-order-form-payment]",function(aB){var aA=ah(this),az=aA.attr("accessally-order-form-payment"),ay=aA.attr("form-ordinal");ah('.accessally-order-form-payment-selected[accessally-order-form-payment][form-ordinal="'+ay+'"]').removeClass("accessally-order-form-payment-selected");aA.addClass("accessally-order-form-payment-selected");ah('[accessally-order-form-payment-input][form-ordinal="'+ay+'"]:visible').hide();ah('[accessally-order-form-payment-input="'+az+'"][form-ordinal="'+ay+'"]').show()});ah(document).on("change","[accessally-order-form-billing-country]",function(aD){var aF=ah(this),aB=aF.val(),aE=aF.attr("accessally-order-form-billing-country"),aG=ah('[accessally-order-form-billing-state="'+aE+'"]'),aC,ay,aA,az=false;for(aC=0;aC<aG.length;++aC){ay=ah(aG[aC]);aA=ay.attr("accessally-order-form-billing-state-country");if(aA===aB){ay.show();az=true}else{ay.hide()}}if(!az){aG.filter('[accessally-order-form-billing-state-country="other"]').show()}});function aw(aF,aD){var aH=ah('[accessally-order-form-billing-country="'+aF+'"]'),aC=aH.val(),aG=ah('[accessally-order-form-billing-state="'+aF+'"]'),aE,az,aB,ay,aA;for(aE=0;aE<aG.length;++aE){az=ah(aG[aE]);aB=az.attr("accessally-order-form-billing-state-country");if(aB===aC){return az.val()}}ay=aG.filter('[accessally-order-form-billing-state-country="other"]');aA=ay.val();if(aD&&aA.length<=0){ay.addClass("accessally-order-form-error-input")}return aA}function a(ay){return ah("<div>").text(ay).html()}function i(ay,aB,az){if("yes"===accessally_script_object.pay.crm_opt){ah(".accessally-order-form-pay-opt").remove();var aC=accessally_script_object.pay.target+"?accessally_pay_optin=y&fname="+encodeURIComponent(aB)+"&email="+az,aA='<iframe class="accessally-order-form-pay-opt" style="position:absolute;width:1px;height:1px;top:0;left:0;z-index:0;" src="'+a(aC)+'"></iframe>';ah("#accessally-order-form-"+ay).append(aA)}}function h(aB){if(aB){var aA=aB+"=",az=document.cookie,ay=az.indexOf(aA);if(ay>=0){ay+=aA.length;endIndex=az.indexOf(";",ay);if(endIndex<0){endIndex=az.length}return az.substring(ay,endIndex)}}return false}var r=["sess_","ref_","oprid","aff_"];function af(){if("yes"===accessally_script_object.pay.otp){var az={},ay,aA;for(ay=0;ay<r.length;++ay){aA=h(r[ay]);if(false!==aA){az[r[ay]]=aA}}return az}return 0}});